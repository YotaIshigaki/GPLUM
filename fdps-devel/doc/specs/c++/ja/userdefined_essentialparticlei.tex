\subsubsection{概要}EssentialParticleIクラスは相互作用の計算に必要なi粒子の情報を持つクラスであり、相互作用の定義(節\ref{sec:overview_action}の手順0)に必要となる。EssentialParticleIクラスはFullParticleクラス(節\ref{sec:fullparticle})のサブセットである。FDPSは、このクラスのデータにアクセスする必要がある。そのため、EssentialParticleIクラスはいくつかのメンバ関数を持つ必要がある。以下、この節の前提、常に必要なメンバ関数と、場合によっては必要なメンバ関数について記述する。\subsubsection{前提}この節の中では、EssentialParticleIクラスとしてEPIというクラスを一例として使う。また、FullParticleクラスの一例としてFPというクラスを使う。EPI, FPというクラス名は変更可能である。EPIとFPの宣言は以下の通りである。\begin{screen}\begin{verbatim}class FP;class EPI;\end{verbatim}\end{screen}\subsubsection{必要なメンバ関数}\subsubsubsection{概要}常に必要なメンバ関数はEPI::getPosとEPI::copyfromFPである。EPI::getPosはEPIクラスの位置情報をFDPSに読み込ませるための関数で、EPI::copyFromFPはFPクラスの情報をEPIクラスに書きこむ関数である。これらのメンバ関数の記述例と解説を以下に示す。\subsubsubsection{EPI::getPos}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\if 0\begin{screen}\begin{verbatim}class EPI {public:    PS::F64vec pos;    PS::F64vec getPos() const {        return this->pos;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}    EPIのメンバ変数posはある１つの粒子の位置情報。このposのデー  タ型はPS::F64vec型。  \item {\bf 引数}  なし  \item {\bf 返値}  PS::F64vec型。EPIクラスの位置情報を保持したメンバ変数。  \item {\bf 機能}  EPIクラスのオブジェクトの位置情報を保持したメンバ変数を返す。  \item {\bf 備考}  EPIクラスのメンバ変数posの変数名は変更可能。\end{itemize}\fi%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\begin{screen}\begin{verbatim}class EPI {public:    PS::F64vec getPos() const;};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 引数}  なし  \item {\bf 返値}  PS::F64vec型。EPIクラスの位置情報を保持したメンバ変数。  \item {\bf 機能}  EPIクラスのオブジェクトの位置情報を保持したメンバ変数を返す。  \end{itemize}\subsubsubsection{EPI::copyFromFP}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\if 0\begin{screen}\begin{verbatim}class FP {public:    PS::S64    identity;    PS::F64    mass;    PS::F64vec position;    PS::F64vec velocity;    PS::F64vec acceleration;    PS::F64    potential;};class EPI {public:    PS::S64    id;    PS::F64vec pos;    void copyFromFP(const FP & fp) {        this->id  = fp.identity;        this->pos = fp.position;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}  FPクラスのメンバ変数identity, positionとEPI  クラスのメンバ変数id, posはそれぞれ対応する情報を持つ。\item {\bf 引数}  fp: 入力。const FP \&型。FPクラスの情報を持つ。  \item {\bf 返値}  なし。  \item {\bf 機能}  FPクラスの持つ１粒子の情報の一部をEssnetialParticleIクラス  に書き込む。  \item {\bf 備考}  FPクラスのメンバ変数の変数名、EPIクラスのメ  ンバ変数の変数名は変更可能。メンバ関数EPI::copyFromFP  の引数名は変更可能。EPIクラスの粒子情報はFP  クラスの粒子情報のサブセット。対応する情報を持つメンバ変数同士のデー  タ型が一致している必要はないが、実数型とベクトル型(または整数型とベ  クトル型)という違いがある場合に正しく動作する保証はない。\end{itemize}\fi%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\begin{screen}\begin{verbatim}class FP;class EPI {public:    void copyFromFP(const FP & fp);};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 引数}  fp: 入力。const FP \&型。FPクラスの情報を持つ。  \item {\bf 返値}  なし。  \item {\bf 機能}  FPクラスの持つ１粒子の情報の一部をEssnetialParticleIクラス  に書き込む。  \end{itemize}\subsubsection{場合によっては必要なメンバ関数}\subsubsubsection{概要}本節では、場合によっては必要なメンバ関数について記述する。相互作用ツリークラスのPS::SEARCH\_MODE型にPS::SEARCH\_MODE\_GATHERまたはPS::SEARCH\_MODE\_SYMMETRYを用いる場合に必要となるメンバ関数ついて記述する。\subsubsubsection{相互作用ツリークラスのPS::SEARCH\_MODE型に\\PS::SEARCH\_MODE\_GATHERまたはPS::SEARCH\_MODE\_SYMMETRYを用いる場合}\subsubsubsubsection{EPI::getRSearch}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\if 0\begin{screen}\begin{verbatim}class EPI {public:    PS::F64 search_radius;    PS::F64 getRSearch() const {        return this->search_radius;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}  EPIクラスのメンバ変数search\_radiusはある１つの粒子の  近傍粒子を探す半径の大きさ。このsearch\_radiusのデータ型はPS::F32型  またはPS::F64型。  \item {\bf 引数}  なし  \item {\bf 返値}  PS::F32型またはPS::F64型。 EPIクラスの近傍粒子を探す  半径の大きさを保持したメンバ変数。  \item {\bf 機能}  EPIクラスの近傍粒子を探す半径の大きさを保持したメンバ  変数を返す。\item {\bf 備考}  EPIクラスのメンバ変数search\_radiusの変数名は変更可能。  \end{itemize}\fi%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\begin{screen}\begin{verbatim}class EPI {public:    PS::F64 getRSearch() const;};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 引数}  なし  \item {\bf 返値}  PS::F32型またはPS::F64型。 EPIクラスの近傍粒子を探す  半径の大きさを保持したメンバ変数。  \item {\bf 機能}  EPIクラスの近傍粒子を探す半径の大きさを保持したメンバ  変数を返す。\end{itemize}