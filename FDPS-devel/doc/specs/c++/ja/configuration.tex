\subsection{概要}

ここではFDPSのファイル構成について記述する。ドキュメント、ソースファイ
ル、テストコード、サンプルコードの順に記述する。

\subsection{ドキュメント}

ドキュメント関係のファイルはディレクトリdocの下にある。チュートリアル
がdoc\_tutorial.pdfであり、仕様書がdoc\_specs.pdfである。

\subsection{ソースファイル}

ソースファイルはディレクトリsrcの下にある。標準機能関係のソースファイ
ルはsrcの直下にある。ディレクトリsrcの直下にあるヘッダファイル
particle\_simulator.hppをソースファイルにインクルードすれば、FDPSの標準
機能を使用できるようになる。

\subsubsection{拡張機能}

拡張機能関係のソースファイルはディレクトリsrcの直下のディレクトリにそ
れぞれ入っている。拡張機能にはParticle Mesh、x86版Phantom-GRAPEがある。

\subsubsubsection{Particle Mesh}

Particle Meshのソースファイルはディレクトリsrc/particle\_meshの下にあ
る。ここでMakefileを編集して、makeを実行すると、ヘッダファイル
particle\_mesh\_class.hppとライブラリlibpm.aができる。このヘッダファイル
をインクルードし、このライブラリをリンクづけすれば、Particle Meshの機
能を使用できるようになる。

\subsubsubsection{x86版Phantom-GRAPE}

x86版Phantom-GRAPEのソースファイルはディレクトリ
src/phantom\_GRAPE\_x86の下にある。この下には低精度N体シミュレーション
用、低精度カットオフ付き相互作用計算用
、高精度N体シミュレーション用(ディレクトリ
G6/libavx)がある。それぞれについて述べる。

\subsubsubsubsection{低精度N体シミュレーション用}

これはディレクトリsrc/phantom\_GRAPE\_x86/G5/newton/libpg5にある。この
ディレクトリ内のMakefileを編集して、makeを実行すると、ライブラリ
libpg5.aができる。このディレクトリ内のヘッダファイルgp5util.hをインク
ルードし、ライブラリlibpg5.aをリンクすると、このPhantom-GRAPEが使用可
能になる。

\subsubsubsubsection{低精度カットオフ付き相互作用計算用}

これはディレクトリsrc/phantom\_GRAPE\_x86/G5/table/にある。このディレ
クトリ内のMakefileを編集して、makeを実行すると、ライブラリlibpg5.aがで
きる。このディレクトリ内のヘッダファイルgp5util.hをインクルードし、ラ
イブラリlibpg5.aをリンクすると、このPhantom-GRAPEが使用可能になる。

\subsubsubsubsection{高精度N体シミュレーション用}

これはディレクトリsrc/phantom\_GRAPE\_x86/G6/libavx/にある。このディレ
クトリ内のMakefileを編集して、makeを実行すると、ライブラリlibg6avx.aが
できる。このディレクトリ内のヘッダファイルgp6util.hをインクルードし、
ライブラリlibg6avx.aをリンクすると、このPhantom-GRAPEが使用可能になる。

\subsection{テストコード}

テストコードはディレクトリtestsの下にある。ディレクトリtestsにカレント
ディレクトリを移し、make checkを実行するとテストスィートが動作する。

\subsection{サンプルコード}

サンプルコードはディレクトリsampleの下にある。サンプルコードは２つ用意
されており、重力N体シミュレーションとSPHシミュレーションである。

\subsubsection{重力N体シミュレーション}

ディレクトリsample/nbodyの下にソースファイルがある。サンプルコードの実
行方法はチュートリアルを参照のこと。

\subsubsection{SPHシミュレーション}

ディレクトリsample/sphの下にソースファイルがある。サンプルコードの実
行方法はチュートリアルを参照のこと。
